<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HostTrack - Property Management Dashboard</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <!-- Suppress source map warning -->
    <script>//# sourceMappingURL=</script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Meta tags for PWA -->
    <meta name="theme-color" content="#6366f1">
    <meta name="description" content="HostTrack - Professional property management dashboard for hosts and property managers">
  </head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">
                <img src="favicon.png" alt="HostTrack Logo">
            </div>
            <div class="loading-spinner"></div>
            <h2>Welcome to HostTrack</h2>
            <p>Your property management companion</p>
            <div class="loading-progress">
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Authentication Screen -->
    <div id="auth-screen" class="auth-screen hidden">
        <div class="auth-container">
            <div class="auth-header">
                <img src="favicon.png" alt="HostTrack" class="auth-logo">
                <h1>Welcome to HostTrack</h1>
                <p>Professional property management made simple</p>
            </div>
            
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">Sign In</button>
                <button class="auth-tab" data-tab="register">Create Account</button>
            </div>
            
            <!-- Login Form -->
            <form id="login-form" class="auth-form">
                <div class="form-group">
                    <label for="login-email">Email</label>
                    <input type="email" id="login-email" required placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="login-password">Password</label>
                    <input type="password" id="login-password" required placeholder="Enter your password">
                </div>
                <button type="submit" class="auth-button">Sign In</button>
            </form>
            
            <!-- Register Form -->
            <form id="register-form" class="auth-form hidden">
                <div class="auth-info">
                    <p>üìß After registration, you'll receive a confirmation email. Please check your inbox and click the confirmation link before logging in.</p>
                </div>
                <div class="form-group">
                    <label for="register-name">Full Name</label>
                    <input type="text" id="register-name" required placeholder="Enter your full name">
                </div>
                <div class="form-group">
                    <label for="register-email">Email</label>
                    <input type="email" id="register-email" required placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="register-password">Password</label>
                    <input type="password" id="register-password" required placeholder="Create a password">
                </div>
                <div class="form-group">
                    <label for="register-phone">Phone Number (Optional)</label>
                    <input type="tel" id="register-phone" placeholder="Enter your phone number">
                </div>
                <button type="submit" class="auth-button">Create Account</button>
            </form>
        </div>
    </div>

    <!-- Main Application -->
    <div id="app" class="app hidden">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <img src="favicon.png" alt="HostTrack" class="header-logo">
                <h1>HostTrack</h1>
            </div>
            
            <button class="mobile-nav-toggle" id="mobile-nav-toggle">‚ò∞</button>
            
            <nav class="nav" id="main-nav">
                <button class="nav-button active" data-page="dashboard">
                    <span class="nav-icon">üìä</span>
                    Dashboard
                </button>
                <button class="nav-button" data-page="properties">
                    <span class="nav-icon">üè†</span>
                    Properties
                </button>
                <button class="nav-button" data-page="bookings">
                    <span class="nav-icon">üìÖ</span>
                    Bookings
                </button>
                <button class="nav-button" data-page="analytics">
                    <span class="nav-icon">üìà</span>
                    Analytics
                </button>
                <button class="nav-button" data-page="services">
                    <span class="nav-icon">üîß</span>
                    Services
                </button>
            </nav>
            
            <div class="header-right">
                <button class="user-menu-button">
                    <span class="user-avatar">U</span>
                    <span class="user-name">John Doe</span>
                </button>
                <div class="user-menu hidden">
                    <button onclick="window.hostTrackApp.openProfileModal()">Profile</button>
                    <button onclick="window.hostTrackApp.logout()">Sign Out</button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page active">
                <div class="page-header">
                    <div class="header-content">
                        <div class="header-text">
                            <h2>Dashboard</h2>
                            <p>Welcome back! Here's your property overview</p>
                        </div>
                        <div class="header-controls">
                            <div class="control-group">
                                <label for="date-range-select" class="control-label">Date Range:</label>
                                <select id="date-range-select" class="select-control">
                                    <option value="current-month">Current Month</option>
                                    <option value="last-month">Last Month</option>
                                    <option value="last-3-months">Last 3 Months</option>
                                    <option value="last-6-months">Last 6 Months</option>
                                    <option value="current-year">Current Year</option>
                                    <option value="custom">Custom Range</option>
                                </select>
                            </div>
                            <div class="control-group" id="custom-date-range" style="display: none;">
                                <label for="start-date" class="control-label">From:</label>
                                <input type="date" id="start-date" class="date-input">
                                <label for="end-date" class="control-label">To:</label>
                                <input type="date" id="end-date" class="date-input">
                            </div>
                            <div class="control-group">
                                <label for="auto-refresh-toggle" class="control-label">Auto-refresh:</label>
                                <input type="checkbox" id="auto-refresh-toggle" class="toggle-control">
                            </div>
                            <div class="control-group">
                                <div class="realtime-status">
                                    <span class="status-indicator" id="realtime-status-indicator"></span>
                                    <span class="status-text" id="realtime-status-text">Connecting...</span>
                                </div>
                            </div>
                            <div class="export-controls">
                                <button id="export-pdf" class="button-export" title="Export as PDF">
                                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z" clip-rule="evenodd"/>
                                    </svg>
                                    PDF
                                </button>
                                <button id="export-csv" class="button-export" title="Export as CSV">
                                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z" clip-rule="evenodd"/>
                                    </svg>
                                    CSV
                                </button>
                            </div>
                            <button id="refresh-dashboard" class="button-secondary">
                                <svg width="16" height="16" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 01.61-1.276z" clip-rule="evenodd"/>
                                </svg>
                                Refresh
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-grid">
                    <!-- Revenue Card -->
                    <div class="revenue-card">
                        <div class="revenue-header">
                            <h3>Total Revenue</h3>
                            <span class="revenue-period">This Month</span>
                        </div>
                        <div id="total-revenue" class="revenue-amount">R 0</div>
                        <div class="revenue-change positive">+0% from last month</div>
                        <div id="revenue-chart-container">
                            <div id="revenue-chart-loading" class="chart-loading">Loading revenue data...</div>
                            <canvas id="revenue-chart" width="400" height="100" style="display: none;"></canvas>
                        </div>
                    </div>
                    
                    <!-- Metrics Grid -->
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-icon">üè†</div>
                            <div class="metric-content">
                                <h4>Properties</h4>
                                <div id="total-properties" class="metric-value">0</div>
                                <div class="metric-change positive">+0 this month</div>
                            </div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-icon">üìÖ</div>
                            <div class="metric-content">
                                <h4>Bookings</h4>
                                <div id="total-bookings" class="metric-value">0</div>
                                <div class="metric-change positive">+0 this month</div>
                            </div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-icon">üìä</div>
                            <div class="metric-content">
                                <h4>Occupancy</h4>
                                <div id="occupancy-rate" class="metric-value">0%</div>
                                <div class="metric-change positive">+0% this month</div>
                            </div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-icon">‚≠ê</div>
                            <div class="metric-content">
                                <h4>Rating</h4>
                                <div class="metric-value">0.0</div>
                                <div class="metric-change neutral">No data</div>
                            </div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-icon">üí∞</div>
                            <div class="metric-content">
                                <h4>Avg. Booking</h4>
                                <div id="avg-booking-value" class="metric-value">R0</div>
                                <div class="metric-change neutral">No data</div>
                            </div>
                        </div>
                        
                        <div class="metric-card">
                            <div class="metric-icon">üìà</div>
                            <div class="metric-content">
                                <h4>Growth Rate</h4>
                                <div id="growth-rate" class="metric-value">0%</div>
                                <div class="metric-change neutral">This month</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Upcoming Bookings -->
                    <div class="upcoming-bookings">
                        <div class="section-header">
                            <h3>Upcoming Bookings</h3>
                            <button class="view-all-button">View All</button>
                        </div>
                        <div id="upcoming-bookings-list" class="bookings-list">
                            <!-- Bookings will be loaded here -->
                        </div>
                    </div>
                    
                    <!-- Property Performance -->
                    <div class="property-performance">
                        <div class="section-header">
                            <h3>Property Performance</h3>
                        </div>
                        <div id="performance-chart-container">
                            <div id="performance-chart-loading" class="chart-loading">Loading performance data...</div>
                            <canvas id="performance-chart" width="400" height="200" style="display: none;"></canvas>
                        </div>
                    </div>

                    <!-- Weekly Occupancy -->
                    <div class="weekly-occupancy">
                        <div class="section-header">
                            <h3>Weekly Occupancy</h3>
                        </div>
                        <div id="occupancy-chart-container">
                            <div id="occupancy-chart-loading" class="chart-loading">Loading occupancy data...</div>
                            <canvas id="occupancy-chart" width="400" height="200" style="display: none;"></canvas>
                        </div>
                    </div>

                    <!-- Trend Indicators -->
                    <div class="trend-indicators">
                        <div class="section-header">
                            <h3>Performance Trends</h3>
                        </div>
                        <div class="trend-grid">
                            <div class="trend-item positive">
                                <div class="trend-icon">üìà</div>
                                <div class="trend-content">
                                    <h4>Revenue Growth</h4>
                                    <div class="trend-value">+12.5%</div>
                                    <div class="trend-period">vs last month</div>
                                </div>
                            </div>
                            <div class="trend-item neutral">
                                <div class="trend-icon">üè†</div>
                                <div class="trend-content">
                                    <h4>Property Utilization</h4>
                                    <div class="trend-value">78%</div>
                                    <div class="trend-period">average occupancy</div>
                                </div>
                            </div>
                            <div class="trend-item positive">
                                <div class="trend-icon">‚≠ê</div>
                                <div class="trend-content">
                                    <h4>Guest Satisfaction</h4>
                                    <div class="trend-value">4.8/5</div>
                                    <div class="trend-period">average rating</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Nathi - Property Management Assistant -->
                    <div class="ai-assistant-section">
                        <div class="section-header">
                            <div class="header-left">
                                <div class="ai-icon">üë©‚Äçüíº</div>
                                <div class="header-text">
                                    <h3>Nathi - Property Management Assistant</h3>
                                    <p>Chat with your friendly AI buddy for instant help with property management, pricing strategies, and business insights! üöÄ</p>
                                </div>
                            </div>
                            <div class="ai-status">
                                <div class="status-dot"></div>
                                <span id="ai-chat-status-text" class="status-text">Ready</span>
                            </div>
                        </div>
                        
                        <div class="ai-chat-container">
                            <div class="chat-sidebar">
                                <div class="quick-actions">
                                    <h4>Quick Actions - Let's Get Started! üöÄ</h4>
                                                               <div class="action-buttons">
                               <button class="action-btn" data-action="analyze-performance">
                                   <span class="action-icon">üìä</span>
                                   <span>Let's Analyze Your Performance!</span>
                               </button>
                               <button class="action-btn" data-action="optimize-pricing">
                                   <span class="action-icon">üí∞</span>
                                   <span>Boost Your Pricing Strategy!</span>
                               </button>
                               <button class="action-btn" data-action="booking-insights">
                                   <span class="action-icon">üìÖ</span>
                                   <span>Discover Booking Secrets!</span>
                               </button>
                               <button class="action-btn" data-action="property-tips">
                                   <span class="action-icon">üè†</span>
                                   <span>Get Pro Property Tips!</span>
                               </button>
                           </div>
                                </div>
                            </div>
                            
                            <div class="chat-main">
                                <div id="ai-chat-messages" class="ai-chat-messages">
                                                   <div class="ai-chat-message ai-message">
                   <div class="ai-chat-avatar">üë©‚Äçüíº</div>
                   <div class="ai-chat-content">
                                            <div class="message-header">
                                                <span class="sender-name">Nathi</span>
                                                <span class="message-time">Just now</span>
                                            </div>
                                                                   <div class="message-text">
                           Hey there! üëã I'm Nathi, your friendly property management buddy! I'm here to make your hosting journey easier and more fun! Here's what I can help you with:
                           <ul>
                               <li>üìä Crunching those numbers to show you how awesome your properties are performing</li>
                               <li>üìÖ Keeping your calendar organized so you never miss a booking</li>
                               <li>üí∞ Finding ways to boost your revenue (who doesn't love that?)</li>
                               <li>üè† Sharing insider tips to make your properties shine</li>
                           </ul>
                           What would you like to chat about today? I'm all ears! üòä
                       </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div id="ai-chat-typing" class="ai-chat-typing hidden">
                                    <div class="ai-chat-avatar">ü§ñ</div>
                                    <div class="ai-chat-content">
                                        <div class="typing-indicator">
                                            <span></span>
                                            <span></span>
                                            <span></span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="ai-chat-input-container">
                                    <div class="input-wrapper">
                                        <textarea 
                                            id="ai-chat-input" 
                                            class="ai-chat-input" 
                                            placeholder="Ask me about property management, bookings, revenue optimization, or anything else..."
                                            rows="1"
                                        ></textarea>
                                        <button id="ai-chat-send" class="ai-chat-send">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Properties Page -->
            <div id="properties-page" class="page">
                <div class="page-header">
                    <h2>Properties</h2>
                    <button class="add-button" onclick="window.hostTrackApp.openModal('add-property-modal')">
                        + Add Property
                    </button>
                </div>
                
                <div id="properties-grid" class="properties-grid">
                    <!-- Properties will be loaded here -->
                </div>
            </div>

            <!-- Bookings Page -->
            <div id="bookings-page" class="page">
                <div class="page-header">
                    <h2>Bookings</h2>
                    <button class="add-button" onclick="window.bookingsManager.openModal('add-booking-modal')">
                        + Add Booking
                    </button>
                </div>
                
                <div class="bookings-filters">
                    <input type="text" placeholder="Search bookings..." class="search-input">
                    <select class="filter-select">
                        <option value="">All Status</option>
                        <option value="confirmed">Confirmed</option>
                        <option value="pending">Pending</option>
                        <option value="cancelled">Cancelled</option>
                    </select>
                </div>
                
                <div id="bookings-table-container" class="bookings-table-container">
                    <!-- Bookings table will be loaded here -->
                </div>
            </div>

            <!-- Analytics Page -->
            <div id="analytics-page" class="page">
                <div class="page-header">
                    <h2>Analytics</h2>
                    <div class="analytics-actions">
                        <button id="export-data-btn" class="btn btn-secondary">Export Data</button>
                        <button id="load-real-data-btn" class="btn btn-primary">Load Real Data</button>
                        <button id="debug-user-data-btn" class="btn btn-info">Debug: List All Data</button>
                    </div>
                </div>
                
                <div class="analytics-filters">
                    <select class="date-range-selector" id="revenue-period">
                        <option value="monthly">Monthly</option>
                        <option value="weekly">Weekly</option>
                        <option value="daily">Daily</option>
                    </select>
                    
                    <select class="date-range-selector" id="occupancy-period">
                        <option value="3months">Last 3 Months</option>
                        <option value="6months">Last 6 Months</option>
                        <option value="12months">Last 12 Months</option>
                    </select>
                </div>
                
                <div class="analytics-grid">
                    <div class="analytics-card">
                        <h3>Revenue Trends</h3>
                        <div class="analytics-loading" id="revenue-loading">
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"/>
                            </svg>
                            Loading revenue data...
                        </div>
                        <canvas id="revenue-trends-chart" width="400" height="200" style="display: none;"></canvas>
                    </div>
                    
                    <div class="analytics-card">
                        <h3>Occupancy Rates</h3>
                        <div class="analytics-loading" id="occupancy-loading">
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"/>
                            </svg>
                            Loading occupancy data...
                        </div>
                        <canvas id="occupancy-chart" width="400" height="200" style="display: none;"></canvas>
                    </div>
                    
                    <div class="analytics-card">
                        <h3>Platform Distribution</h3>
                        <div class="analytics-loading" id="platform-loading">
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"/>
                            </svg>
                            Loading platform data...
                        </div>
                        <canvas id="platform-chart" width="400" height="200" style="display: none;"></canvas>
                    </div>
                    
                    <div class="analytics-card">
                        <h3>Performance Metrics</h3>
                        <div class="analytics-loading" id="metrics-loading">
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"/>
                            </svg>
                            Loading metrics data...
                        </div>
                        <canvas id="property-comparison-chart" width="400" height="200" style="display: none;"></canvas>
                    </div>
                </div>
            </div>

            <!-- Services Page -->
            <div id="services-page" class="page">
                <div class="page-header">
                    <h2>Services & Expenses</h2>
                    <button class="add-button" onclick="openServiceModal()">
                        <span>+</span>
                        Add Service
                    </button>
                </div>
                
                <div class="services-grid">
                    <!-- Services Overview -->
                    <div class="services-overview">
                        <div class="overview-card">
                            <div class="overview-header">
                                <h3>Total Expenses</h3>
                                <div class="frequency-toggle">
                                    <button class="frequency-toggle-btn active" data-frequency="all">All</button>
                                    <button class="frequency-toggle-btn" data-frequency="monthly">Monthly</button>
                                    <button class="frequency-toggle-btn" data-frequency="yearly">Yearly</button>
                                    <button class="frequency-toggle-btn" data-frequency="weekly">Weekly</button>
                                    <button class="frequency-toggle-btn" data-frequency="daily">Daily</button>
                                    <button class="frequency-toggle-btn" data-frequency="quarterly">Quarterly</button>
                                    <button class="frequency-toggle-btn" data-frequency="per_stay">Per Stay</button>
                                    <button class="frequency-toggle-btn" data-frequency="one_time">One Time</button>
                                </div>
                            </div>
                            <div id="total-monthly-expenses" class="overview-amount">R 0</div>
                            <div class="overview-change positive">-8.2% from last month</div>
                        </div>
                        
                        <div class="overview-card">
                            <h3>Active Services</h3>
                            <div id="active-services-count" class="overview-amount">0</div>
                            <div class="overview-change neutral">No change</div>
                        </div>
                        
                        <div class="overview-card">
                            <h3>Next Due</h3>
                            <div id="next-due-service" class="overview-amount">No services</div>
                            <div id="next-due-days" class="overview-change">No upcoming dues</div>
                        </div>
                    </div>
                    
                    <!-- Services List -->
                    <div class="services-list">
                        <div class="section-header">
                            <h3>Active Services</h3>
                            <div class="services-filters">
                                <select class="filter-select">
                                    <option value="all">All Services</option>
                                    <option value="cleaning">Cleaning</option>
                                    <option value="insurance">Insurance</option>
                                    <option value="maintenance">Maintenance</option>
                                    <option value="utilities">Utilities</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                        </div>
                        
                        <div id="services-table-container" class="services-table-container">
                            <table class="services-table">
                                <thead>
                                    <tr>
                                        <th>Service</th>
                                        <th>Category</th>
                                        <th>Provider</th>
                                        <th>Property</th>
                                        <th>Cost</th>
                                        <th>Frequency</th>
                                        <th>Next Due</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="services-table-body">
                                    <!-- Services will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Expenses Charts -->
                    <div class="expenses-charts-grid">
                        <!-- Monthly Expenses Chart -->
                        <div class="expenses-chart">
                            <div class="section-header">
                                <h3>Monthly Expenses</h3>
                            </div>
                            <canvas id="monthly-expenses-chart" width="400" height="200"></canvas>
                        </div>
                        
                        <!-- Yearly Expenses Chart -->
                        <div class="expenses-chart">
                            <div class="section-header">
                                <h3>Yearly Expenses</h3>
                            </div>
                            <canvas id="yearly-expenses-chart" width="400" height="200"></canvas>
                        </div>
                        
                        <!-- Weekly Expenses Chart -->
                        <div class="expenses-chart">
                            <div class="section-header">
                                <h3>Weekly Expenses</h3>
                            </div>
                            <canvas id="weekly-expenses-chart" width="400" height="200"></canvas>
                        </div>
                        
                        <!-- Daily Expenses Chart -->
                        <div class="expenses-chart">
                            <div class="section-header">
                                <h3>Daily Expenses</h3>
                            </div>
                            <canvas id="daily-expenses-chart" width="400" height="200"></canvas>
                        </div>
                        
                        <!-- Quarterly Expenses Chart -->
                        <div class="expenses-chart">
                            <div class="section-header">
                                <h3>Quarterly Expenses</h3>
                            </div>
                            <canvas id="quarterly-expenses-chart" width="400" height="200"></canvas>
                        </div>
                        
                        <!-- One-time Expenses Chart -->
                        <div class="expenses-chart">
                            <div class="section-header">
                                <h3>One-time Expenses</h3>
                            </div>
                            <canvas id="onetime-expenses-chart" width="400" height="200"></canvas>
                        </div>
                        
                        <!-- Per Stay Expenses Chart -->
                        <div class="expenses-chart">
                            <div class="section-header">
                                <h3>Per Stay Expenses</h3>
                            </div>
                            <canvas id="perstay-expenses-chart" width="400" height="200"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>



    <!-- Modals -->
    <div id="modal-overlay" class="modal-overlay hidden"></div>
    
    <!-- Add Property Modal -->
    <div id="add-property-modal" class="modal hidden">
        <div class="modal-header">
            <h3>Add New Property</h3>
                            <button class="modal-close" onclick="window.hostTrackApp.closeModal('add-property-modal')">√ó</button>
        </div>
        <div class="modal-content">
            <form id="add-property-form">
                <div class="form-group">
                    <label for="property-name">Property Name</label>
                    <input type="text" id="property-name" required placeholder="Enter property name">
                </div>
                <div class="form-group">
                    <label for="property-image">Property Image</label>
                    <div class="image-upload-container">
                        <input type="file" id="property-image" accept="image/*" class="image-upload-input">
                        <div class="image-upload-preview" id="image-upload-preview">
                            <img id="image-preview" src="" alt="Preview" class="image-preview-img">
                            <div class="image-upload-placeholder">
                                <div class="upload-icon-container">
                                    <span class="upload-icon">üì∑</span>
                                </div>
                                <div class="upload-text-container">
                                    <span class="upload-text">Click to upload image</span>
                                    <span class="upload-subtext">or drag and drop here</span>
                                </div>
                                <div class="upload-hint">
                                    <span class="hint-icon">üí°</span>
                                    <span>Images are automatically compressed to save storage costs</span>
                                </div>
                            </div>
                            <div class="image-upload-overlay">
                                <div class="overlay-content">
                                    <span class="overlay-icon">üì§</span>
                                    <span class="overlay-text">Drop image here</span>
                                </div>
                            </div>
                        </div>
                        <div class="image-upload-info">
                            <div class="upload-stats">
                                <span class="stat-item">
                                    <span class="stat-icon">üìè</span>
                                    <span class="stat-text">Max 800x600px</span>
                                </span>
                                <span class="stat-item">
                                    <span class="stat-icon">üíæ</span>
                                    <span class="stat-text">70% quality</span>
                                </span>
                                <span class="stat-item">
                                    <span class="stat-icon">‚ö°</span>
                                    <span class="stat-text">Auto-compressed</span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="property-location">Location</label>
                    <input type="text" id="property-location" required placeholder="Enter location">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="property-type">Property Type</label>
                        <select id="property-type" required>
                            <option value="">Select type</option>
                            <option value="apartment">Apartment</option>
                            <option value="house">House</option>
                            <option value="cottage">Cottage</option>
                            <option value="villa">Villa</option>
                            <option value="studio">Studio</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="property-price">Base Price (R)</label>
                        <input type="number" id="property-price" required placeholder="0.00" step="0.01">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="property-bedrooms">Bedrooms</label>
                        <input type="number" id="property-bedrooms" required placeholder="1" min="1" max="10">
                    </div>
                    <div class="form-group">
                        <label for="property-bathrooms">Bathrooms</label>
                        <input type="number" id="property-bathrooms" required placeholder="1" min="1" max="10">
                    </div>
                </div>
                <div class="form-group">
                    <label for="property-max-guests">Max Guests</label>
                    <input type="number" id="property-max-guests" required placeholder="2" min="1" max="20">
                </div>
                <div class="form-group">
                    <label>Platforms</label>
                    <div class="platforms-checkbox-group">
                        <label class="platform-checkbox">
                            <input type="checkbox" name="platforms" value="airbnb">
                            <span class="checkbox-label">Airbnb</span>
                        </label>
                        <label class="platform-checkbox">
                            <input type="checkbox" name="platforms" value="booking">
                            <span class="checkbox-label">Booking.com</span>
                        </label>
                        <label class="platform-checkbox">
                            <input type="checkbox" name="platforms" value="manual">
                            <span class="checkbox-label">Manual</span>
                        </label>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" onclick="window.hostTrackApp.closeModal('add-property-modal')" class="button-secondary">Cancel</button>
                    <button type="submit" class="button-primary">Add Property</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Add Booking Modal -->
    <div id="add-booking-modal" class="modal hidden">
        <div class="modal-header">
            <h3>Add New Booking</h3>
            <button class="modal-close" onclick="window.bookingsManager.closeModal('add-booking-modal')">√ó</button>
        </div>
        <div class="modal-content">
            <form id="add-booking-form">
                <div class="form-group">
                    <label for="booking-property">Property *</label>
                    <select id="booking-property" name="property_id" required>
                        <option value="">Select property</option>
                    </select>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="booking-guest">Guest Name *</label>
                        <input type="text" id="booking-guest" name="guest_name" required placeholder="Enter guest name">
                    </div>
                    <div class="form-group">
                        <label for="booking-guests">Number of Guests</label>
                        <input type="number" id="booking-guests" name="guests" min="1" max="20" value="1" placeholder="1">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="booking-email">Guest Email</label>
                        <input type="email" id="booking-email" name="guest_email" placeholder="guest@example.com">
                    </div>
                    <div class="form-group">
                        <label for="booking-phone">Guest Phone</label>
                        <input type="tel" id="booking-phone" name="guest_phone" placeholder="+27 123 456 789">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="booking-checkin">Check-in Date *</label>
                        <input type="date" id="booking-checkin" name="check_in" required>
                    </div>
                    <div class="form-group">
                        <label for="booking-checkout">Check-out Date *</label>
                        <input type="date" id="booking-checkout" name="check_out" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="booking-price">Total Price (R) *</label>
                    <input type="number" id="booking-price" name="price" required placeholder="0.00" step="0.01" min="0">
                </div>
                
                <div class="form-group">
                    <label for="booking-status">Status</label>
                    <select id="booking-status" name="status">
                        <option value="confirmed">Confirmed</option>
                        <option value="pending">Pending</option>
                        <option value="cancelled">Cancelled</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="booking-notes">Notes</label>
                    <textarea id="booking-notes" name="notes" placeholder="Any additional notes about this booking..." rows="3"></textarea>
                </div>
                
                <div class="form-actions">
                    <button type="button" onclick="window.bookingsManager.closeModal('add-booking-modal')" class="button-secondary">Cancel</button>
                    <button type="submit" class="button-primary">Add Booking</button>
                </div>
            </form>
        </div>
    </div>

    <!-- User Profile Modal -->
    <div id="profile-modal" class="modal hidden">
        <div class="modal-header">
            <h3>User Profile</h3>
            <button class="modal-close" onclick="window.hostTrackApp.closeModal('profile-modal')">√ó</button>
        </div>
        <div class="modal-content">
            <form id="profile-form">
                <div class="form-group">
                    <label for="profile-name">Full Name</label>
                    <input type="text" id="profile-name" name="name" required placeholder="Enter your full name">
                </div>
                
                <div class="form-group">
                    <label for="profile-email">Email</label>
                    <input type="email" id="profile-email" name="email" required placeholder="Enter your email" readonly>
                </div>
                
                <div class="form-group">
                    <label for="profile-phone">Phone Number</label>
                    <input type="tel" id="profile-phone" name="phone" placeholder="Enter your phone number">
                </div>
                
                <div class="form-actions">
                    <button type="button" onclick="window.hostTrackApp.closeModal('profile-modal')" class="button-secondary">Cancel</button>
                    <button type="submit" class="button-primary">Update Profile</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Service Modal -->
    <div id="add-service-modal" class="modal hidden">
        <div class="modal-header">
            <h3>Add New Service</h3>
            <button class="modal-close" onclick="window.servicesManager.closeModal('add-service-modal')">√ó</button>
        </div>
        <div class="modal-content">
            <form id="add-service-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="service-name">Service Name</label>
                        <input type="text" id="service-name" required placeholder="e.g., Cleaning, Insurance, Maintenance">
                    </div>
                    <div class="form-group">
                        <label for="service-category">Category</label>
                        <select id="service-category" required>
                            <option value="">Select category</option>
                            <option value="cleaning">Cleaning</option>
                            <option value="insurance">Insurance</option>
                            <option value="maintenance">Maintenance</option>
                            <option value="utilities">Utilities</option>
                            <option value="internet">Internet</option>
                            <option value="security">Security</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="service-provider">Service Provider</label>
                    <input type="text" id="service-provider" required placeholder="e.g., CleanPro, Insurance Co">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="service-cost">Monthly Cost (R)</label>
                        <input type="number" id="service-cost" required placeholder="0.00" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="service-frequency">Frequency</label>
                        <select id="service-frequency" required>
                            <option value="">Select frequency</option>
                            <option value="monthly">Monthly</option>
                            <option value="quarterly">Quarterly</option>
                            <option value="yearly">Yearly</option>
                            <option value="one-time">One-time</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="service-next-due">Next Due Date</label>
                    <input type="date" id="service-next-due" required>
                </div>
                <div class="form-group">
                    <label for="service-property">Property (Optional)</label>
                    <select id="service-property">
                        <option value="">All Properties</option>
                        <option value="cape-town">Cape Town Apartment</option>
                        <option value="stellenbosch">Stellenbosch Cottage</option>
                        <option value="johannesburg">Johannesburg Villa</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="service-description">Description (Optional)</label>
                    <textarea id="service-description" placeholder="Additional details about this service"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" onclick="window.servicesManager.closeModal('add-service-modal')" class="button-secondary">Cancel</button>
                    <button type="submit" class="button-primary">Add Service</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Nathi Chat Widget Styles -->

    
    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script src="js/app.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/properties.js"></script>
    <script src="js/bookings.js"></script>
    <script src="js/analytics.js"></script>
    <script src="js/charts.js"></script>

    <script src="js/services.js"></script>
    <script src="js/realtime.js"></script>
    <script src="js/advancedAnalytics.js"></script>
    <script src="js/phase3Dashboard.js"></script>
    
    <!-- Nathi Chat Widget -->
    <script src="js/ai-chat.js"></script>
    

  </body>
</html>
